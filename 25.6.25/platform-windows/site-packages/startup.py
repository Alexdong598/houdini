"""Startup script for Shotgun Library UI in Houdini/Maya."""

from PySide2 import QtCore

if '__name__' not in globals():
    globals()['__name__'] = '__main__'

def launch_ui():
    """Launch the Shotgun Library UI."""
    try:
        # Try relative import first
        try:
            from .ui import execute
        except ImportError:
            # Fall back to absolute import
            from ui import execute
        
        # Get main window instance and ensure it stays alive
        window = execute()
        window.setAttribute(QtCore.Qt.WA_DeleteOnClose, False)
        return window
    except Exception as e:
        print(f"Failed to launch Shotgun Library UI: {str(e)}")
        raise

# Register for Houdini
try:
    # import hou
    # hou.session.shotgun_library_launch_ui = launch_ui
    launch_ui()
except ImportError:
    pass

# Register for Maya
try:
    import maya.cmds as cmds
    if not cmds.about(batch=True):
        cmds.evalDeferred(launch_ui)
except ImportError:
    pass
