"""Math utilities."""


def refit_value(
    value, old_min, old_max, new_min, new_max, clamp=True
):  # pylint: disable=too-many-arguments, line-too-long
    """Refit the input value so old_min is new_min and old_max is new_max.

    Args:
        value (float): Value to refit.
        old_min (float): Minimum input value.
        old_max (float): Maximum input value.
        new_min (float): Minimum output value.
        new_max (float): Maximum output value.
        clamp (bool, optional): Clamp output value between new_min and new_max.
            Defaults to True.

    Returns:
        float: Refitted value.

    Raises:
        ValueError: If old_min == old_max or new_min == new_max.

    Examples:
        >>> refit_value(5.0, 0.0, 10.0, 0.0, 1.0)
        0.5
        >>> refit_value(10.0, 0.0, 1.0, 0.0, 5.0, True)
        5
        >>> refit_value(10.0, 0.0, 1.0, 0.0, 5.0, False)
        50

    """
    if old_min == old_max or new_min == new_max:
        raise ValueError("Trying to refit from or to the same min and max " "value.")

    fitted_value = (new_max - new_min) * (value - old_min) / (
        old_max - old_min
    ) + new_min

    if clamp:
        fitted_value = max(min(new_min, new_max), fitted_value)
        fitted_value = min(max(new_min, new_max), fitted_value)

    return fitted_value
